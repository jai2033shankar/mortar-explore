## Mortar Explore

Mortar Explore is a plugin for the [Mortar Gem](https://github.com/mortardata/mortar). It is a specialized tool to visualize recommendations generated by Mortar Data's iopen source project [mortar-recsys](https://github.com/mortardata/mortar-recsys) built for participants for the self-serve recommender program.  It can also be used to see all general results of a pig job.


### Installation 

Before getting started make sure you already have [Mortar installed](http://help.mortardata.com/reference/mortar_project_reference/install_mortar_development_framework).

```
$ gem install bundler
$ mortar plugins:install https://github.com/mortardata/mortar-explore.git
```

Run through the [recommendation engine tutorial](http://help.mortardata.com/data_apps/recommendation_engine). View the item\_item\_recs.

### Usage with Mortar Recsys

To start exploring your results:

```
$ mortar explore  RESULTS_DIRECTORY
```

Mortar recsys is targeted to work with generated `item_item_recs` results. For example:

```
$ mortar explore data/out/item_item_recs
```

#### Mortar Recsys Specific 

In the details page, you can see that the bottom has configuration settings that need to be set.  *Ensure that you add `http://` in front of the url!!*   These are urls that lead to your own applications where the images of your items are located and the pages of your item are located.  Each url will use the item id to identify the exact image or page to render.  *The code looks for `#{id}` in the url to replace the id with.*  

You also need to set the corresponding columns to match your data output.  You need to set the selected item, the recommended item IDs, and the rank of the recommended item.  

For default, set Selected Item to 'column1', Recommended Item to 'column2' and Rank to 'column5'

### Mortar Explore Example

Begin by downloading the [mortar-explore-demo](https://github.com/mortarcode/mortar-explore-demo).  Go to the root of the project and run:
```
$ mortar explore data/books/out/item_item_recs/ -r
```

When prompted for an Image URL and Item URL, enter:
```
http://images.amazon.com/images/P/#{id}
```
And for item URL, enter:
```
http://www.amazon.com/s?ie=UTF8&field-isbn=#{id}
```

Selected Item is `column1`, Recommended Item is `column2` and rank is `column5`

### Development 

To help develop Mortar Explore, make sure you have the latest version of the Mortar Gem. Then clone this repo and run:


```
$ bundle install --standalone

```
Once completed, you need to use ruby 1.8.7 to run rake.  So ensure you are using with rvm by running:


```
$ rvm use 1.8.7
```

Then run:

```
$ rake watch
```

This will start a file watcher over the Mortar Explore repo, any changes will cause the rake script to reinstall the plugin. If for whatever reason your installation of Mortar Explore breaks, you can uninstall it by running:

```
$ rake clean
```
